{"version":3,"file":"rtlifyRules.js","sourceRoot":"../src/","sources":["transforms/rtlifyRules.ts"],"names":[],"mappings":"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","sourcesContent":["const _nameReplacements: { [key: string]: string } = {\r\n  'left': 'right',\r\n  'right': 'left'\r\n};\r\n\r\nconst _valueReplacements: { [key: string]: string } = {\r\n  'w-resize': 'e-resize',\r\n  'sw-resize': 'se-resize',\r\n  'nw-resize': 'ne-resize'\r\n};\r\n\r\nconst NO_FLIP = '@noflip';\r\n\r\nlet _rtl = getRTL();\r\n\r\nexport function setRTL(isRTL: boolean): void {\r\n  _rtl = isRTL;\r\n}\r\nexport function getRTL(): boolean {\r\n  if (_rtl === undefined) {\r\n    _rtl = (\r\n      typeof document !== 'undefined' &&\r\n      !!document.documentElement &&\r\n      document.documentElement.getAttribute('dir') === 'rtl'\r\n    );\r\n  }\r\n  return _rtl;\r\n}\r\n\r\nexport function rtlifyRules(\r\n  rulePairs: (string | number)[],\r\n  index: number\r\n): void {\r\n  if (getRTL()) {\r\n    const name = rulePairs[index] as string;\r\n    const value = rulePairs[index + 1] as string;\r\n\r\n    if (value.indexOf(NO_FLIP) >= 0) {\r\n      rulePairs[index + 1] = value.replace(/\\s*(?:\\/\\*\\s*)?\\@noflip\\b(?:\\s*\\*\\/)?\\s*?/g, '');\r\n    } else if (name.indexOf('left') >= 0) {\r\n      rulePairs[index] = name.replace('left', 'right');\r\n    } else if (name.indexOf('right') >= 0) {\r\n      rulePairs[index] = name.replace('right', 'left');\r\n    } else if (String(value).indexOf('left') >= 0) {\r\n      rulePairs[index + 1] = value.replace('left', 'right');\r\n    } else if (String(value).indexOf('right') >= 0) {\r\n      rulePairs[index + 1] = value.replace('right', 'left');\r\n    } else if (_nameReplacements[name]) {\r\n      rulePairs[index] = _nameReplacements[name];\r\n    } else if (_valueReplacements[value]) {\r\n      rulePairs[index + 1] = _valueReplacements[value];\r\n    } else {\r\n      switch (name) {\r\n        case 'margin':\r\n        case 'padding':\r\n          rulePairs[index + 1] = flipQuad(value);\r\n          break;\r\n        case 'box-shadow':\r\n          rulePairs[index + 1] = negateNum(value, 0);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction negateNum(value: string, partIndex: number): string {\r\n  const parts = value.split(' ');\r\n  const numberVal = parseInt(parts[partIndex], 10);\r\n\r\n  parts[0] = parts[0].replace(String(numberVal), String(numberVal * -1));\r\n\r\n  return parts.join(' ');\r\n}\r\n\r\nfunction flipQuad(value: string): string {\r\n  if (typeof value === 'string') {\r\n    const parts = value.split(' ');\r\n\r\n    if (parts.length === 4) {\r\n      return `${parts[0]} ${parts[3]} ${parts[2]} ${parts[1]}`;\r\n    }\r\n  }\r\n\r\n  return value;\r\n}"]}